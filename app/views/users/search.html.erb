<div class="jumbotron">
    <h2>Users</h2>

    <div class="row">
        <%# https://getbootstrap.com/docs/5.0/layout/grid/#auto-layout-columns %>
<!--        <div class="col">

            <%#= form_tag("/users/search", method: "get") do %>
            <%#= label_tag(:q, "Search for:") %>
            <%#= text_field_tag(:q) %>
            <%#= submit_tag("Search") %>
            <%# end %>
            </div>-->


      <% form_tag users_search_path, :method => 'get' do %>
        <p>
          <%= text_field_tag :search, params[:search] %>
          <%= submit_tag "Search", :firstname => nil %>
        </p>
      <% end %>

    </div>

    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>

        <% @users.each do |user| %>
          <tr>
            <td><%= user.email %></td>
            <% unless current_user.contacts.include? user or user.contact_requests.include? current_user %>
              <td><%=  button_to '+', user_contact_requests_path(user), method: :post, id: user.id  %></td>
            <% end %>
          </tr>
        <% end %>

        </tbody>
    </table>
</div>
